{% load crispy_forms_tags crispy_forms_filters %}

<div id="{{ formset.prefix }}-formset">
    <h3>{{ header }}</h3>
    {{ formset.management_form }}
    {% for form in formset %}
        <div class="{{ formset.prefix }}-form pb-1">
            {{ form.errors }}
            {{ form.non_field_errors }}
            {% for hidden in form.hidden_fields %}
                {{ hidden }}
            {% endfor %}
            {% crispy form %}
            <div class="child-formset">
                {% include "fohseriet/elements/formset.html" with formset=form.nested_formset header="Svar" %}
            </div>
        </div>
    {% endfor %}
    <div class="emptyform {{ formset.prefix }}-form pb-1" style="display: none">
        {% with form=formset.empty_form %}
            {{ form.errors }}
            {{ form.non_field_errors }}
            {% for hidden in form.hidden_fields %}
                {{ hidden }}
            {% endfor %}
            {% crispy form %}
            <div class="child-formset">
                {% include "fohseriet/elements/formset.html" with formset=form.nested_formset header="Svar" %}
            </div>
        {% endwith %}
    </div>
    <button type="button" class="btn btn-success add-{{ formset.prefix }}">
        LÃ¤gg till fler
        <i class="fa fa-plus" aria-hidden="true"></i>
    </button>
</div>
<script>
    bindNestedFormset("{{ formset.prefix }}", "{{ formset.0.nested_formset.prefix }}");
</script>
