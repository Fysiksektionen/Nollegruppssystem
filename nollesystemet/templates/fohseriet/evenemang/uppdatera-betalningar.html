{% extends 'fohseriet/base-sites/base-content.html' %}
{% load crispy_forms_tags %}
{% load crispy_forms_filters %}

{% block title %}
    Betalning/närvaro: {{ happening }}
{% endblock %}

{% block content-indented %}
    {% include "common/elements/back-button.html" %}
    {% crispy form %}
{% endblock %}

{% block extrapostscript %}
    {{ block.super }}
    <script type="text/javascript">
        let formSubmitted = false;

        $( "button[name='submit']" ).click(function(){
            formSubmitted = true;
        });

        window.onbeforeunload = function( event ) {
            if (!formSubmitted) {
                return 'Har du sparat informationen? Alla ändringar kommer kastas annars.';
            } else {
                event.preventDefault();
            }
        };
    </script>
{% endblock %}
